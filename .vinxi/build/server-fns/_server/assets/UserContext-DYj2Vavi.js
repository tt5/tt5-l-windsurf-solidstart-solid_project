import{createComponent as c}from"solid-js/web";import{useContext as l,createContext as d,createSignal as n,onMount as f}from"solid-js";const s=d();function U(r){const[a,t]=n(null),[i,u]=n(!0);return f(async()=>{try{const o=await fetch("/api/auth/verify");if(o.ok){const e=await o.json();e.valid&&e.user&&t({id:e.user.id,username:e.user.username,gameJoined:!1,homeX:0,homeY:0,role:e.user.role})}}catch(o){console.error("Failed to load user:",o)}finally{u(!1)}}),c(s.Provider,{value:{user:a,setUser:t,loading:i},get children(){return r.children}})}function p(){const r=l(s);if(!r)throw new Error("useUser must be used within a UserProvider");return r}export{U,p as u};
