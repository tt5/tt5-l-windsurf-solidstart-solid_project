import{g as a}from"./assets/db-97-DOlOW.js";import{G as n}from"./assets/game.service-Bf9Z8hov.js";import{w as i}from"./assets/auth-BVUYsDc6.js";import"sqlite3";import"sqlite";import"fs";import"path";import"./assets/utils-AQpNWTN2.js";import"pako";import"./assets/jwt-CO0ye28h.js";import"jsonwebtoken";const S=i(async s=>{const{user:o}=s;try{const t=await a(),e=await new n(t).getGameStatus(o.userId);if(!e)return new Response(JSON.stringify({success:!0,gameJoined:!1,homeX:0,homeY:0,message:"User has not joined the game yet"}),{status:200,headers:{"Content-Type":"application/json"}});const r={success:!0,gameJoined:e.gameJoined,homeX:e.homeX,homeY:e.homeY,message:e.gameJoined?`Your home base is at (${e.homeX}, ${e.homeY})`:"You have not joined the game yet"};return new Response(JSON.stringify(r),{status:200,headers:{"Content-Type":"application/json"}})}catch(t){return console.error("Error in game status endpoint:",t),new Response(JSON.stringify({success:!1,gameJoined:!1,homeX:0,homeY:0,error:"An unexpected error occurred while fetching game status",message:"Failed to load game status. Please try again."}),{status:500,headers:{"Content-Type":"application/json"}})}});export{S as GET};
