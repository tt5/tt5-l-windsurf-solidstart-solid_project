import{h as ee,e as o,i as u,t as d,v as m,l as a,y as l,z as s,m as te,b as f,F as $,r as re,T as ie}from"./index-BtiM2clC.js";import{u as ne}from"./AuthContext-CwAE7fDx.js";import{s as r}from"./Login.module-Ci4nll34.js";import{u as se,h as ae}from"./routing-DQha3BAi.js";import{A as le}from"./components-DShUfCzN.js";var oe=d("<div><div><h2>Sign In</h2><!$><!/><!$><!/><form><div><label for=username>Username</label><input type=text id=username required></div><div><label for=password>Password</label><input type=password id=password required></div><div><button type=submit></button></div></form><div><p>Don't have an account? <!$><!/>"),ue=d("<div>Registration successful! Please sign in."),de=d("<div>");function ge(){const[_,I]=o(""),[b,M]=o(""),[h,p]=o(""),[g,S]=o(!1),k=se(),q=ae(),A=ne(),D=q.state?.registered,z=()=>new URLSearchParams(window.location.search).get("returnUrl")||"/game",H=async i=>{i.preventDefault(),p(""),S(!0);try{await A.login(_(),b());const t=z();k(t,{replace:!0})}catch(t){p(t instanceof Error?t.message:"Login failed")}finally{S(!1)}};return(()=>{var i=u(oe),t=i.firstChild,j=t.firstChild,B=j.nextSibling,[x,G]=m(B.nextSibling),J=x.nextSibling,[y,K]=m(J.nextSibling),c=y.nextSibling,w=c.firstChild,O=w.firstChild,C=O.nextSibling,L=w.nextSibling,Q=L.firstChild,E=Q.nextSibling,V=L.nextSibling,v=V.firstChild,U=c.nextSibling,P=U.firstChild,W=P.firstChild,X=W.nextSibling,[Y,Z]=m(X.nextSibling);return a(t,D&&(()=>{var e=u(ue);return l(()=>s(e,r.successMessage)),e})(),x,G),a(t,(()=>{var e=te(()=>!!h());return()=>e()&&(()=>{var n=u(de);return a(n,h),l(()=>s(n,r.errorMessage)),n})()})(),y,K),c.addEventListener("submit",H),C.$$input=e=>I(e.currentTarget.value),E.$$input=e=>M(e.currentTarget.value),a(v,()=>g()?"Signing in...":"Sign In"),a(P,f(le,{href:"/register",get class(){return r.link},children:"Register here"}),Y,Z),l(e=>{var n=r.loginContainer,R=r.loginForm,N=g(),T=g()?r.buttonLoading:"",F=r.footer;return n!==e.e&&s(i,e.e=n),R!==e.t&&s(t,e.t=R),N!==e.a&&$(v,"disabled",e.a=N),T!==e.o&&s(v,e.o=T),F!==e.i&&s(U,e.i=F),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l(()=>$(C,"value",_())),l(()=>$(E,"value",b())),re(),i})()}ee(["input"]);var ce=d("<h1>Sign in to your account");function be(){return[f(ie,{children:"Login - Superstar"}),u(ce),f(ge,{})]}export{be as default};
