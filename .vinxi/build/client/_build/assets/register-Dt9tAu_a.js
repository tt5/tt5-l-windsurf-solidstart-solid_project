import{h as G,e as s,i as f,t as p,v as P,l as o,m as K,y as l,z as n,b as $,F as m,r as Q,T as V}from"./index-BtiM2clC.js";import{s as i}from"./Login.module-Ci4nll34.js";import{u as W}from"./routing-DQha3BAi.js";import{A as X}from"./components-DShUfCzN.js";var Y=p("<div><div><h2>Create an Account</h2><!$><!/><form><div><label for=username>Username</label><input type=text id=username required></div><div><label for=password>Password</label><input type=password id=password required></div><div><button type=submit></button></div></form><div><span>Already have an account? </span><!$><!/>"),Z=p("<div>");function ee(){const[b,k]=s(""),[h,F]=s(""),[_,S]=s(""),[d,y]=s(!1),U=W(),j=async a=>{a.preventDefault(),S(""),y(!0);try{const t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b(),password:h()})}),u=await t.json();if(!t.ok)throw new Error(u.error||"Registration failed");U("/login",{state:{registered:!0}})}catch(t){S(t instanceof Error?t.message:"Registration failed")}finally{y(!1)}};return(()=>{var a=f(Y),t=a.firstChild,u=t.firstChild,q=u.nextSibling,[x,M]=P(q.nextSibling),g=x.nextSibling,C=g.firstChild,O=C.firstChild,w=O.nextSibling,E=C.nextSibling,z=E.firstChild,R=z.nextSibling,D=E.nextSibling,v=D.firstChild,c=g.nextSibling,H=c.firstChild,I=H.nextSibling,[J,B]=P(I.nextSibling);return o(t,(()=>{var e=K(()=>!!_());return()=>e()&&(()=>{var r=f(Z);return o(r,_),l(()=>n(r,i.errorMessage)),r})()})(),x,M),g.addEventListener("submit",j),w.$$input=e=>k(e.currentTarget.value),R.$$input=e=>F(e.currentTarget.value),o(v,()=>d()?"Creating Account...":"Sign Up"),o(c,$(X,{href:"/login",get class(){return i.link},children:"Sign in"}),J,B),l(e=>{var r=i.loginContainer,T=i.loginForm,N=d(),A=d()?i.buttonLoading:"",L=i.footer;return r!==e.e&&n(a,e.e=r),T!==e.t&&n(t,e.t=T),N!==e.a&&m(v,"disabled",e.a=N),A!==e.o&&n(v,e.o=A),L!==e.i&&n(c,e.i=L),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l(()=>m(w,"value",b())),l(()=>m(R,"value",h())),Q(),a})()}G(["input"]);var te=p("<h1>Create your account");function se(){return[$(V,{children:"Register - Superstar"}),f(te),$(ee,{})]}export{se as default};
